/*GUITARRAS DE DATABASE PARA ARROJAR ELECCIONES*/
class GuitarrasDB {
    constructor (name,time,age,body,price,brand,color,img) {
    this.name=name;
    this.time=time;
    this.age=age;
    this.body=body;
    this.price=price;
    this.brand=brand;
    this.color=color;
    this.img=img;
    }
}

const prod1=new GuitarrasDB("SQUIER AFFINITY MINI STRATOCASTER V2 ELECTRIC GUITAR BLACK" ,"basic","kid","solidbody",150,"fender","black", "./img/guitar1.png")
const prod2=new GuitarrasDB("Squier Affinity Mini Stratocaster V2 Electric Guitar Shell Pink" ,"basic","kid","solidbody",150,"fender","other","./img/guitar2.png")
const prod3=new GuitarrasDB("Squier Mini Jazzmaster HH Maple Fingerboard Electric Guitar Daphne Blue" ,"basic","kid","solidbody",170,"fender","other","./img/guitar3.png")
const prod4=new GuitarrasDB("Ibanez GRGM21M Electric Guitar Orange Burst" ,"basic","kidadult","solidbody",170,"ibanez","other","./img/guitar4.png")
const prod5=new GuitarrasDB("Ibanez GRGM21M Electric Guitar Metallic Purple" ,"basic","kidadult","solidbody",150,"ibanez","other","./img/guitar5.png")
const prod6=new GuitarrasDB("Ibanez Paul Stanley Signature miKro Electric Guitar Black" ,"basic","kid","solidbody",250,"ibanez","black","./img/guitar6.png")
const prod7=new GuitarrasDB("Ibanez PGMM11 Paul Gilbert Signature 6str miKro Electric Guitar Jewel Blue" ,"basic","kid","solidbody",200,"ibanez","other","./img/guitar7.png")

const prod8=new GuitarrasDB("Ibanez GRGM21M Electric Guitar Flat Black" ,"basic","kidadult","solidbody",150,"ibanez","black","./img/guitar8.png")
const prod9=new GuitarrasDB("Squier Affinity Series Starcaster Maple Fingerboard Electric Guitar Black" ,"basicadvanced","adult","semihollow",299,"fender","black","./img/guitar9.png")
const prod10=new GuitarrasDB("Ibanez Artcore AS53 Semi-Hollow Electric Guitar Flat Transparent Black" ,"basicadvanced","adult","semihollow",280,"ibanez","black","./img/guitar10.png")
const prod11=new GuitarrasDB("Fender Kurt Cobain Jaguar NOS Electric Guitar 3-Color Sunburst" ,"basicadvanced","adult","solidbody",1400,"fender","blackother","./img/guitar11.png")
const prod12=new GuitarrasDB("Epiphone Les Paul Studio Electric Guitar Wine Red" ,"basicadvanced","adult","hollowbody",500,"gibson","other","./img/guitar12.png")
const prod13=new GuitarrasDB("Gibson Les Paul Standard '50s P-90 Electric Guitar Gold Top" ,"advanced","adult","hollowbody",500,"gibson","other","./img/guitar13.png")
const prod14=new GuitarrasDB("Ibanez AF95FM Artcore Expressionist Series Electric Guitar Antique Yellow Sunburst" ,"basicadvanced","adult","hollowbody",710,"ibanez","other","./img/guitar14.png")
const prod15=new GuitarrasDB("Gibson SG Standard '61 Maestro Vibrola Electric Guitar Vintage Cherry" ,"advanced","adult","semihollow",2199,"gibson","other","./img/guitar15.png")
const prod16=new GuitarrasDB("Gibson Les Paul Standard '60s Limited-Edition Electric Guitar Tri-Burst" ,"advanced","adult","hollowbody",2200,"gibson","other","./img/guitar16.png")
const prod17=new GuitarrasDB("Fender American Professional II Stratocaster Maple Fingerboard Electric Guitar Dark Night" ,"advanced","adult","solidbody",2100,"fender","blackother","./img/guitar17.png")
const prod18=new GuitarrasDB("Ibanez JEMJR Steve Vai Signature JEM Series Electric Guitar White" ,"advanced","kidadult","solidbody",400,"ibanez","white","./img/guitar18.png")
const prod19=new GuitarrasDB("Squier Paranormal Series Offset Telecaster Maple Fingerboard Olympic White" ,"basicadvanced","kidadult","hollowbody",500,"fender","white","./img/guitar19.png")
const prod20=new GuitarrasDB("Ibanez GRGM21 Mikro Electric Guitar White" ,"basicadvanced","kidadult","solidbody",150,"ibanez","white","./img/guitar20.png")
const prod21=new GuitarrasDB("Ibanez GRGA120 GIO RGA Series Electric Guitar White" ,"basicadvanced","kidadult","solidbody",200,"ibanez","white","./img/guitar21.png")
const prod22=new GuitarrasDB("Epiphone SG Standard Left-Handed Electric Guitar Alpine White" ,"advanced","kidadult","semihollow",500,"gibson","white","./img/guitar22.png")
const prod23=new GuitarrasDB("Epiphone B.B. King Lucille Semi-Hollow Electric Guitar Ebony","advanced","adult","semihollow",949,"gibson","black","./img/guitar23.png")
const prod24=new GuitarrasDB("Squier Classic Vibe '70s Telecaster Thinline Limited-Edition Electric Guitar Olympic White","advanced","adult","semihollow",499,"fender","white","./img/guitar24.png")
const prod25=new GuitarrasDB("Ibanez Artcore AS73G Semi-Hollow Electric Guitar Metallic Purple Flat","basicadvanced","kidadult","semihollow",299,"ibanez","other","./img/guitar25.png")
const prod26=new GuitarrasDB("G&L Tribute ASAT Classic Bluesboy Semi-Hollow Electric Guitar Blonde Rosewood Fretboard","basicadvanced","kidadult","semihollow",599,"fender","other","./img/guitar26.png")
const prod27=new GuitarrasDB("Ibanez JSM20 John Scofield Signature Electric Guitar Black Low Gloss","advanced","adult","semihollow",999,"ibanez","black","./img/guitar27.png")
const prod28=new GuitarrasDB("Epiphone Casino Hollowbody Electric Guitar Vintage Sunburst","basicadvanced","kidadult","semihollow",699,"gibson","other","./img/guitar28.png")
const prod29=new GuitarrasDB("Ibanez Artcore AM53 Semi-Hollow Electric Guitar Flat Sunset Red","basicadvanced","kidadult","hollowbody",299,"ibanez","other","./img/guitar29.png")
const prod30=new GuitarrasDB("Ibanez Artcore AF75 Hollowbody Electric Guitar Vintage Sunburst","basicadvanced","kidadult","hollowbody",399,"ibanez","blackother","./img/guitar30.png")
const prod31=new GuitarrasDB("Squier Contemporary Active Starcaster Maple Fingerboard Flat Black","basicadvanced","kidadult","hollowbody",399,"fender","black","./img/guitar31.png")
const prod32=new GuitarrasDB("Squier Contemporary Active Starcaster Maple Fingerboard Ice Blue Metallic","basicadvanced","kidadult","hollowbody",280,"fender","other","./img/guitar32.png")
const prod33=new GuitarrasDB("Ibanez AM93QM Artcore Expressionist Series Electric Guitar Jet Blue Burst","basicadvanced","adult","hollowbody",649,"ibanez","other","./img/guitar33.png")
const prod34=new GuitarrasDB("Epiphone Joe Pass Emperor-II Pro Hollowbody Electric Guitar Vintage Sunburst","basicadvanced","kidadult","hollowbody",750,"gibson","blackother","./img/guitar34.png")
const prod35=new GuitarrasDB("Ibanez GB Series GB10SE George Benson Signature Hollow Body","advanced","adult","hollowbody",1200,"ibanez","blackother","./img/guitar35.png")
const prod36=new GuitarrasDB("Gibson Les Paul Tribute Electric Guitar Satin Honey Burst","advanced","kidadult","solidbody",1200,"gibson","other","./img/guitar36.png")
const prod37=new GuitarrasDB("Epiphone ES-335 Figured Semi-Hollow Electric Guitar Blueberry Burst","advanced","kidadult","semihollow",650,"gibson","other","./img/guitar37.png")
const prod38=new GuitarrasDB("Fender Player Stratocaster Maple Fingerboard Electric Guitar 3-Color Sunburst","basicadvanced","kidadult","solidbody",849,"fender","other","./img/guitar38.png")
const prod39=new GuitarrasDB("Fender American Performer Stratocaster HSS Maple","basicadvanced","kidadult","solidbody",1300,"fender","other","./img/guitar39.png")
const prod40=new GuitarrasDB("Fender Telecaster Richie Kotzen Solid Body Electric Guitar Brown Sunburst","advanced","kidadult","solidbody",1700,"fender","other","./img/guitar40.png")
const prod41=new GuitarrasDB("Squier Stratocaster Electric Guitar Pack With Squier Frontman 10G Amp Black","basic","kidadult","solidbody",289,"fender","blackother","./img/guitar41.png")



/*ARRAYS DE LAS OPCIONES*/
var timeBasic=[prod1,prod2,prod3,prod4,prod5,prod6,prod7,prod8,prod9,prod10,prod11,prod12,prod14,prod19,prod20,prod21,prod25,prod26,prod28,prod29,prod30,prod31,prod32,prod33,prod34,prod38,prod39,prod41]
var timeAdvanced=[prod9,prod10,prod11,prod12,prod13,prod14,prod15,prod16,prod17,prod18,prod19,prod20,prod21,prod22,prod23,prod24,prod25,prod26,prod27,prod28,prod29,prod30,prod31,prod32,prod33,prod34,prod35,prod36,prod37,prod38,prod39,prod40]

var elecciones=[]
var elecciones1=[]
var elecciones2=[]
var elecciones3=[]
var elecciones4=[]
var pricefailed=[]
var brandfailed=[]




/*OBTENCIÓN BOTONES DEL PROGRAMA*/

var botones=document.querySelector(".guitarFinderButtonContainer")
var startboton=document.querySelector(".startButton")
var nextboton=document.getElementById("gfNextButton")
var resetboton=document.querySelector(".backbutton")
var results=document.querySelector(".results")

startboton.addEventListener("click",empezar)
resetboton.addEventListener("click",resetear)
nextboton.addEventListener("click",mostrar)

/*OBTENCIÓN TEXTOS PROGRAMA*/
var startText=document.querySelector(".guitarFinderText")

var h2option=document.createElement("h2")
var divbodyoption=document.createElement("div") /*para info de bodys*/
h2option.classList.add("animate__animated")
h2option.classList.add("animate__fadeInRight")
divbodyoption.classList.add("bodyinfo")
/*OBTENCIÓN DE OPCIÓN MOSTRADA Y ARRAYS DE INPUTS*/
var index=1;
var option = document.getElementById("option"+index)


var allinputs=new Array(document.getElementsByTagName("input"))
var opt1inputs=[allinputs[0][0],allinputs[0][1],allinputs[0][2],allinputs[0][3],allinputs[0][4],allinputs[0][5],allinputs[0][6],allinputs[0][7],allinputs[0][8],allinputs[0][9],allinputs[0][10],allinputs[0][11],allinputs[0][12],allinputs[0][13],allinputs[0][14]]
console.log(allinputs[0])
console.log(opt1inputs)



/*FUNCION PARA EMPEZAR LA APP*/
function empezar () {
    startboton.style.display="none"
    startText.style.display="none"
    document.querySelector(".guitarFinderApp").style.display="flex"
    botones.style.display="flex"
    option.style.display="flex"
    h2option.innerHTML="<h2>Are you a beginner or experienced guitarist?</h2>"
    document.querySelector(".guitarFinder").prepend(h2option)
}

  
/*FUNCIONES DE MOSTRAR RESULTADOS*/

function mostrar() {             
    switch(index) {
        case 1: chequeado1("a",1);
        h2option.innerHTML="<h2>Awesome! Is this guitar for an adult or child?</h2>"
        console.log("ejectuando opcion1")
        break
        case 2:chequeado2("a",2);
        h2option.innerHTML="<h2>Which body style are you most interested in?</h2>"
        console.log("ejectuando opcion2")
        break
        case 3:chequeado3("a",3);
        h2option.innerHTML="<h2>What were you thinking in terms of budget?</h2>"
        divbodyoption.innerHTML=""
        console.log("ejecutada tercera opcion")
        break
        case 4:chequeado4("a",4);
        h2option.innerHTML="<h2>Do you have a brand preference?</h2>"
        posiblescoincidencias4();
        console.log("ejecutada cuarta opcion")
        break
        case 5: chequeado5("a",5);
            posiblescoincidencias5();
            option.style.display="none"   /*HACE QUE SE DESAPAREZCA LA ULTIMA OPCIÓN PARA DAR PASO A LOS RESULTADOS*/
        case 6: if (elecciones4.length>=0) {
                   alert("HAY"+elecciones4.length+" SELECCIONES DEL 100%")
                   for (let i=0;i<=elecciones4.length;i++) {
                        if (elecciones4[i]!==undefined) {
                            results.style.display="flex"
                            results.innerHTML += `    
                           <div class=resultsCard>
                           <p>${elecciones4[i].name}</p>
                           <img src="${elecciones4[i].img}"
                          </div>
                          `;
                          console.log("se hizo la primer impresion")
                       }
                        }
                }
                if (pricefailed.length>=0) {
                    alert("HAY " +pricefailed.length+". COINCIDENCIAS, CON PRECIO FALLADO")
                    for (let i=0; i<=pricefailed.length;i++) {
                        results.innerHTML += `    
                    <div class=resultsCardMatchs1>
                        <p>${pricefailed[i].name}</p>
                        <img src="${pricefailed[i].img}"
                    </div>
                    `;
                    }
                }
                if (brandfailed.length>=0) {
                    alert("AHI TE VAA")
                    for (let i=0; i<=brandfailed.length;i++) {
                        results.innerHTML += `    
                    <div class=resultsCardMatchs2>
                        <p>${brandfailed[i].name}</p>
                        <img src="${brandfailed[i].img}"
                    </div>
                    `;
                    }
                }
                break
        }
        
    if (option.style.display ="flex") {    
       option.style.display ="none"
       index++;                                                         
       option = document.getElementById("option"+index)
       option.style.display="flex"
    } else if (option.style.display ="none") {
        option.style.display="flex"
        index++;
    }
     console.log("el index es "+index) 
    
}


/*FUNCION SELECCION DE ITEM , COLOR AL IMG*/

var arrayimg=document.getElementsByTagName("img")
let letra="a"
var input= document.getElementById("opt"+index+letra)  

function seleccion (indi){
    let stop=false
    if (opt1inputs[indi].checked==true) {
        arrayimg[indi+1].classList.add("activeimg")
    } else if (opt1inputs[indi].checked==false) {
        arrayimg[indi+1].classList.remove("activeimg")
    } 
    if (indi==4 && opt1inputs[indi].checked==true) {
        divbodyoption.innerHTML="<p>Solidbody electrics provide more sustain and are less susceptible to feedback. Solidbody electrics are staples in most popular music styles, including rock, country and blues.</p>"
        document.querySelector(".guitarFinderApp").appendChild(divbodyoption)
    } else if (indi==4 && opt1inputs[indi].checked==false) {
        divbodyoption.innerHTML=""
    }
    if (indi==5 && opt1inputs[indi].checked==true) {
        divbodyoption.innerHTML="<p>Semi-hollow body electrics combine the style and resonant, warm sound of a hollowbody with the feedback-fighting benefits and longer sustain of a solidbody. Their distinctive tones are popular among rock, blues and rockabilly players.</p>"
        document.querySelector(".guitarFinderApp").appendChild(divbodyoption)
    } else if (indi==5 && opt1inputs[indi].checked==false) {
        divbodyoption.innerHTML=""
    }
    if (indi==6 && opt1inputs[indi].checked==true) {
        divbodyoption.innerHTML="<p>Hollowbody guitars retain the natural, airy and woody sound of an acoustic guitar, but are prone to feedback when amplified at high volume levels. Hollowbody guitars are popular among jazz, country and folk players.</p>"
        document.querySelector(".guitarFinderApp").appendChild(divbodyoption)
    } else if (indi==6 && opt1inputs[indi].checked==false) {
        divbodyoption.innerHTML=""
    }
}


var contador=0
//!NO ENTIENDO BIEN XQ FUNCIONA
switch (index) {
    case 1:
        console.log("EL INDEX ESSS DE "+index)
        opt1inputs[contador].addEventListener("change",()=> seleccion(0))
        opt1inputs[contador+1].addEventListener("change",()=> seleccion(1))
    case 2:
        contador=2
        console.log("EL INDEX ESSS DE "+index)
        opt1inputs[contador].addEventListener("change",()=> seleccion(2))
        opt1inputs[contador+1].addEventListener("change",()=> seleccion(3))
    case 3:
        console.log("EL INDEX ESSS DE "+index)
        contador=4
        opt1inputs[contador].addEventListener("change",()=> seleccion(4))
        opt1inputs[contador+1].addEventListener("change",()=> seleccion(5))
        opt1inputs[contador+2].addEventListener("change",()=> seleccion(6))
        opt1inputs[contador+3].addEventListener("change",()=> seleccion(7))
        opt1inputs[contador+4].addEventListener("change",()=> seleccion(8))
        opt1inputs[contador+5].addEventListener("change",()=> seleccion(9))
        opt1inputs[contador+6].addEventListener("change",()=> seleccion(10))
        opt1inputs[contador+7].addEventListener("change",()=> seleccion(11))
        opt1inputs[contador+8].addEventListener("change",()=> seleccion(12))
   /*  case 2:opt2inputs[contador].addEventListener */
}
console.log(opt1inputs)






/*RESETEO DE INPUTS Y ARRAYS CON ELECCIONES*/

function resetear() {
    option.style.display="none"
    index=0;
    console.log(allinputs.length)
    for (let f=0; f<=allinputs[0].length;f++) {
        if (allinputs[0][f]!==undefined) {
            console.log("BORRANDO LOS INPUT")
            allinputs[0][f].checked=false
        }
    }
    elecciones1=[]
    elecciones2=[]
    elecciones3=[]
    elecciones4=[]
    pricefailed=[]
    brandfailed=[]
    results.innerHTML=""
    h2option.innerHTML="<h2>Are you a beginner or experienced guitarist?</h2>"
    console.log("arrays reseteados y contenido vaciado")
    console.log(arrayimg)
     for (let imagen of arrayimg) {
        if (imagen.classList.contains("activeimg")) {
            imagen.classList.remove("activeimg")
        } 
        imagen++
    } 
    mostrar()
}


/*FUNCIONES QUE CHEQUEAN LAS OPCIONES MARCADAS */ 

function chequeado1(letra,inputindex){
    for (let z=1; z<3;z++) {
        input= document.getElementById("opt"+inputindex+letra)  
        if (input.checked && letra=="a") {
              elecciones= timeBasic.filter(p=> p)
              console.log("ELECCIONES ES "+elecciones);
              console.log("se voto la basic")
              break;
        }
        else if (input.checked && letra=="b") {
            elecciones=timeAdvanced.filter(p=>p)
              console.log(elecciones);
              console.log("se voto la advanced")
        }
        else {
            letra="b"
        }
    }
}
    
function chequeado2(letra,inputindex) {
 for (let z=1; z<3; z++) {
         input= document.getElementById("opt"+inputindex+letra)  
        if (input.checked && letra=="a") {
              elecciones1= elecciones.filter(p => p.age==="kid" || p.age==="kidadult")
              console.log("se filtro por kids")
              console.log(elecciones1)
              break;
        }
        else if (input.checked && letra=="b") {
              elecciones1= elecciones.filter(p=>p.age==="adult" || p.age==="kidadult")
              console.log(elecciones1);
              console.log("se voto adult")
              break;
        }
        else {
            letra="b"
            console.log("cambio la letra a b")
        }
        
    }
}



 function chequeado3(letra,inputindex) {
    for (let m=1;m<4;m++ ) {
        input= document.getElementById("opt"+inputindex+letra) 
        if (input.checked && letra=="a") {
             elecciones2=elecciones1.filter(p=>p.body==="solidbody")
             console.log(elecciones2)
             break
        }
        else if (input.checked && letra=="b") {
            elecciones2=elecciones1.filter(p=>p.body==="semihollow")
            console.log(elecciones2)
            break
        }
        else if (input.checked && letra=="c") {
            elecciones2=elecciones1.filter(p=>p.body==="hollowbody")
            console.log(elecciones2)
            break
        }
        else {
            if (letra=="b") {
                letra="c"
                console.log("la letra es C")
            }
            else {
                letra="b"
                console.log("la letra del chequeado 3 es "+letra)
            }
        }
        console.log(m)
    }
 }
 function chequeado4(letra,inputindex) {
    for (let m=1;m<4;m++ ) {
        input= document.getElementById("opt"+inputindex+letra) 
        if (input.checked && letra=="a") {
             elecciones3=elecciones2.filter(p=>p.price<=300)
             console.log(elecciones3)
             console.log("anda el precio")
             break
        }
        else if (input.checked && letra=="b") {
            elecciones3=elecciones2.filter(p=>p.price>300 && p.price<=700)
            console.log(elecciones3)
            console.log("anda el precio")
            break
        }
        else if (input.checked && letra=="c") {
            elecciones3=elecciones2.filter(p=>p.price>700 && p.price<=3000)
            console.log(elecciones3)
            console.log("anda el precio")
            break
        }
        else {
            if (letra=="b") {
                letra="c"
                console.log("la letra es C")
            }
            else {
                letra="b"
                console.log("la letra del chequeado 4 es "+letra)
            }
        }
       
    }
 }
 function chequeado5(letra,inputindex) {
    for (let m=1;m<5;m++ ) {
        input= document.getElementById("opt"+inputindex+letra) 
        if (input.checked && letra=="a") {
             elecciones4=elecciones3.filter(p=>p.brand==="fender")
             console.log(elecciones4)
             break
        }
        else if (input.checked && letra=="b") {
            elecciones4=elecciones3.filter(p=>p.brand==="gibson")
            console.log(elecciones4)
            break
        }
        else if (input.checked && letra=="c") {
            elecciones4=elecciones3.filter(p=>p.brand==="ibanez")
            console.log(elecciones4)
            break
        }
        else {
            if (letra=="b") {
                letra="c"
                console.log("la letra es C")
            }
            else {
                letra="b"
                console.log("la letra del chequeado 5 es "+letra)
            }
        }
       
    }
 }


/*FUNCIONES DE COINCIDENCIAS PARA IMPRIMIR*/
  
function posiblescoincidencias4() {
    if (elecciones3.length<2) {
        pricefailed=elecciones2;
        console.log(pricefailed)
        alert("encontramos coincidencias. Price X")
    }
}
function posiblescoincidencias5() {
    if (elecciones4.length<2) {
        brandfailed=elecciones3.concat(pricefailed);
        console.log(brandfailed+" :BRAND FAILED")
        alert("encontramos coincidencias. BRAND X") 
    }
}


 /*EFECTOS MUSICA */

 var imagenhover = document.querySelector(".img")
 var audioplay=document.querySelector(".playbutton")
var audioArr=document.getElementsByTagName("audio")
console.log(audioArr)
/* imagenhover.addEventListener("mouseenter", ()=> {
    audioArr[2].play()
})
imagenhover.addEventListener("mouseleave", ()=> {
    audioArr[1].play()
}) */
audioplay.addEventListener("click",()=> {
    audioArr[2].play()
})
